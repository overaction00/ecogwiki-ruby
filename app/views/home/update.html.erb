<%= stylesheet_link_tag 'codemirror/codemirror', :media => 'all' %>
<%= stylesheet_link_tag 'highlightjs/solarized_dark', :media => 'all' %>
<%= javascript_include_tag 'codemirror/codemirror' %>
<%= javascript_include_tag 'codemirror/markdown' %>
<%= javascript_include_tag 'highlightjs/highlight.pack' %>
<%= javascript_include_tag 'edit_view' %>
<header>
<h1>
    <% titles = params[:wikipage].split(/\//); titles[0..-2].each_with_index do | item, index | %>
        <span class="parent">
            <a href="<%= '/' + titles[0..index].join('/') %>"><%= titles[index] %></a>
        </span>
    <% end %>
    <span><%= titles[-1] %></span>
</h1>
</header>
<article id="wikibody_preview"><section class="body"></section></article>

<%= form_tag(absolute_path(params[:wikipage]), method: 'post', class: 'editform') do %>
  <input type="hidden" name="revision" value="{{ page.revision }}">
  <input type="hidden" name="preview" value="0">

  <textarea name="body" placeholder="Body" autofocus="autofocus"><%= @wikipage.body unless @wikipage.nil? %></textarea>

  <input name="comment" placeholder="Comment" class="comment" value="">
  <div class="actions">
    <input type="submit" value="Save" class="btn btn-primary btn-save">
    <input type="button" value="Preview" class="btn btn-preview">
    <input type="button" value="Delete" class="btn btn-delete">
  </div>
<% end %>
